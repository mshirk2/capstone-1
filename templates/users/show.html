{% extends 'base.html' %}

{% block content %}

{% if g.user.id == user.id %}
<div class="container">
    <div class="mb-3">
        <h1>Hi, {{ user.username }}</h1>
    </div>

    <!-- Edit profile -->
    <div>
        <a href="/users/profile" class="btn btn-secondary">Edit Profile</a>
    </div>
    <br>
    <br>

    <!-- Saved Searches -->
    <h3>Saved Searches</h3>
    {% if g.user.searches %}
        <div id="searches-list" class="list-group my-3">
        {% for search in g.user.searches %}
        <div class="list-group-item d-flex align-items-center justify-content-between">
            <span id="retrieve-search" data-search-id="{{ search.id }}">
            {{ search.name }}
            </span>
            <div>
                <!-- Edit search-->
                <a href="/search/{{ search.id }}/edit" id="saved-search-edit" class="text-dark">
                    <i title="Edit Saved Search" class="fa-solid fa-pencil"></i>
                </a>
                <!-- Delete search -->
                <a method="POST" href="/search/{{ search.id }}/delete"  id="saved-search-delete" class="text-dark">
                    <i title="Delete Saved Search" class="fa-solid fa-x"></i>
                </a>
                
            </div>
        </div>
        {% endfor %}
    {% else %}
    <p>You haven't saved any searches yet!</p>
    {% endif %}
    <br>
    <br>

    <!-- Delete Profile -->
    <div>
        <form method="POST" action="/users/delete" class="form-inline">
            <button class="btn btn-small btn-outline-danger">Delete Profile</button>
        </form>
    </div>

</div>

{% else %}

    <div>
        <p class="alert alert-danger">{{ AUTH_ERROR }}</p>
        <a href="/">Return home</a>
    </div>

{% endif %}

{% endblock %}